"use strict";function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var a,o,n=[],s=!0,l=!1;try{for(t=t.call(r);!(s=(a=t.next()).done)&&(n.push(a.value),!e||n.length!==e);s=!0);}catch(r){l=!0,o=r}finally{try{s||null==t.return||t.return()}finally{if(l)throw o}}return n}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}var table=document.querySelector("table"),score=0,board=new Array(4).fill(null).map((function(r){return[0,0,0,0]})),rows=4,columns=4,button=document.querySelector("button"),messageLose=document.querySelector(".message-lose"),messageWin=document.querySelector(".message-win"),messageStart=document.querySelector(".message-start");function setGame(){var r=[];if(board.forEach((function(e,t){e.forEach((function(e,a){0===e&&r.push([t,a])}))})),r.length){var e=Math.random()<=.1?4:2,t=_slicedToArray(r[Math.floor(Math.random()*r.length)],2),a=t[0],o=t[1];board[a][o]=e,isGameOver()}}function isGameOver(){if(!board.some((function(r){return r.some((function(r){return 0===r}))}))){for(var r=0;r<rows;r++)for(var e=0;e<columns-1;e++)if(board[r][e]===board[r][e+1]||board[e][r]===board[e+1][r])return;messageLose.classList.remove("hidden")}}function updateGame(){for(var r=0;r<rows;r++)for(var e=0;e<columns;e++)0===board[r][e]?(table.rows[r].cells[e].innerText="",table.rows[r].cells[e].className="field-cell"):(table.rows[r].cells[e].innerHTML=board[r][e],table.rows[r].cells[e].classList.add("field-cell--".concat(board[r][e])));isGameOver(),document.querySelector(".game-score").innerText=score}function clearZero(r){return r.filter((function(r){return 0!==r}))}function slide(r){for(var e=clearZero(r),t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,score+=e[t]);for(e=clearZero(e);e.length<rows;)e.push(0);return e}function moveHorizontal(r){for(var e=0;e<rows;e++){var t=board[e];r&&t.reverse(),t=slide(t),board[e]=r?t.reverse():t}}function moveVertical(r){for(var e=0;e<columns;e++){var t=[board[0][e],board[1][e],board[2][e],board[3][e]];r?(t.reverse(),(t=slide(t)).reverse()):t=slide(t),board[0][e]=t[0],board[1][e]=t[1],board[2][e]=t[2],board[3][e]=t[3];for(var a=0;a<rows;a++)board[a][e]=t[a]}}button.addEventListener("click",(function(){button.classList.contains("start")?(button.classList.remove("start"),button.classList.add("restart"),button.innerText="Restart",messageStart.classList.add("hidden")):button.classList.contains("restart")&&(board=new Array(4).fill(null).map((function(r){return[0,0,0,0]})),messageLose.classList.add("hidden"),messageWin.classList.add("hidden"),score=0),setGame(),setGame(),updateGame()})),document.addEventListener("keyup",(function(r){switch(r.code){case"ArrowLeft":moveHorizontal(!1);break;case"ArrowRight":moveHorizontal(!0);break;case"ArrowUp":moveVertical(!1);break;case"ArrowDown":moveVertical(!0)}setGame(),setGame(),updateGame()}));
//# sourceMappingURL=index.2ca06b65.js.map
